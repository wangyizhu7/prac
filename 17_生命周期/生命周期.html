<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title></title>
    <script type="text/javascript" src="../js/vue.js"></script>
    <style></style>
  </head>
  <body>
    <div id="root">
      <!-- 动态绑定CSS样式 需要写成对象形式 -->
      <h2 :style="{opacity:opacity}">aaaaaaaa</h2>
      <button @click="stop">点我停止变换</button>
    </div>
    <script type="text/javascript">

      const vm = new Vue({
        el: "#root",
        data: {
          timer:'',
          opacity: 1,
        },
        mounted(){
          this.timer = setInterval(() => {
            vm.opacity -= 0.01;
              if (vm.opacity <= 0) {
                vm.opacity = 1;
              }
            }, 16)
        },
        methods:{
          stop(){
            this.$destroy()//为了体会beforeDestroy
          }
        },
        beforeDestroy(){
          clearInterval(this.timer)
          console.log('销毁');
        }
      });
    </script>
  </body>
</html>
